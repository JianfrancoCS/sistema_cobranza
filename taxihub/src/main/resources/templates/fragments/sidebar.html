<div th:fragment="sidebar" class="sidebar d-flex flex-column  " style="width: 240px;">

    <a href="/dashboard" th:if="${#authorization.expression('hasAuthority(''VER_DASHBOARD'')')}"
       class="btn btn-light text-start d-flex align-items-center gap-2 rounded-0 h-default h-sidebar">
        <i class="bi bi-speedometer2"></i> Dashboard
    </a>

    <div class="d-flex flex-column flex-grow-1">

        <a href="/empleados" th:if="${#authorization.expression('hasAuthority(''VER_EMPLEADOS'')')}"
           class="btn btn-light text-start d-flex align-items-center gap-2 rounded-0 h-default h-sidebar">
            <i class="bi bi-person-badge"></i> Empleados
        </a>

        <a href="/autos" th:if="${#authorization.expression('hasAuthority(''VER_AUTOS'')')}"
           class="btn btn-light text-start d-flex align-items-center gap-2 rounded-0 h-default h-sidebar">
            <i class="bi bi-car-front"></i> Autos
        </a>

        <a href="/comisiones" th:if="${#authorization.expression('hasAuthority(''VER_COMISIONES'')')}"
           class="btn btn-light text-start d-flex align-items-center gap-2 rounded-0 h-default h-sidebar">
            <i class="bi bi-currency-dollar"></i> Comisiones
        </a>

        <div class="accordion accordion-flush" id="mainSidebarAccordion">
        
        <div th:if="${#authorization.expression('hasAuthority(''VER_DEUDAS_TODOS'') or hasAuthority(''VER_DEUDAS_PROPIOS'')')}">
            <div class="accordion-item border-0">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed rounded-0 h-default h-sidebar"
                            data-bs-toggle="collapse" data-bs-target="#deudasCollapse">
                        <i class="bi bi-credit-card-2-back me-2"></i>Deudas
                    </button>
                </h2>
                <div id="deudasCollapse" class="accordion-collapse collapse" data-bs-parent="#mainSidebarAccordion">
                    <div class="list-group list-group-flush">
                        <a href="/deudas" class="list-group-item list-group-item-action h-default h-sidebar small"
                           th:if="${#authorization.expression('hasAuthority(''VER_DEUDAS_TODOS'')')}">
                            <i class="bi bi-list-ul me-2"></i><span class="text-truncate">Todas las Deudas</span>
                        </a>
                        <a href="/deudas/conductor" class="list-group-item list-group-item-action h-default h-sidebar small"
                           th:if="${#authorization.expression('hasAuthority(''VER_DEUDAS_PROPIOS'')')}">
                            <i class="bi bi-person-exclamation me-2"></i><span class="text-truncate">Mis Deudas</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <div th:if="${#authorization.expression('hasAuthority(''VER_PAGOS_TODOS'') or hasAuthority(''VER_PAGOS_PROPIOS'')')}">
            <div class="accordion-item border-0">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed rounded-0 h-default h-sidebar"
                            data-bs-toggle="collapse" data-bs-target="#pagosCollapse">
                        <i class="bi bi-cash-coin me-2"></i>Pagos
                    </button>
                </h2>
                <div id="pagosCollapse" class="accordion-collapse collapse" data-bs-parent="#mainSidebarAccordion">
                    <div class="list-group list-group-flush">
                        <a href="/pagos" class="list-group-item list-group-item-action h-default h-sidebar small"
                           th:if="${#authorization.expression('hasAuthority(''VER_PAGOS_TODOS'')')}">
                            <i class="bi bi-list-ul me-2"></i><span class="text-truncate">Todos los Pagos</span>
                        </a>
                        <a href="/pagos/conductor" class="list-group-item list-group-item-action h-default h-sidebar small"
                           th:if="${#authorization.expression('hasAuthority(''VER_PAGOS_PROPIOS'')')}">
                            <i class="bi bi-person-check me-2"></i><span class="text-truncate">Mis Pagos</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <div th:if="${#authorization.expression('hasAuthority(''CREAR_MARCACIONES'')')}">
            <div class="accordion-item border-0">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed rounded-0 h-default h-sidebar"
                            data-bs-toggle="collapse" data-bs-target="#marcacionesCollapse">
                        <i class="bi bi-qr-code-scan me-2"></i>Marcaciones
                    </button>
                </h2>
                <div id="marcacionesCollapse" class="accordion-collapse collapse" data-bs-parent="#mainSidebarAccordion">
                    <div class="list-group list-group-flush">
                        <a href="/marcaciones/entrada" class="list-group-item list-group-item-action h-default h-sidebar small">
                            <i class="bi bi-box-arrow-in-right me-2"></i><span class="text-truncate">Entrada</span>
                        </a>
                        <a href="/marcaciones/salida" class="list-group-item list-group-item-action h-default h-sidebar small">
                            <i class="bi bi-box-arrow-left me-2"></i><span class="text-truncate">Salida</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>


        <div class="flex-grow-1" th:if="${#authorization.expression('hasAuthority(''VER_USUARIOS'') or hasAuthority(''VER_AUTORIDADES'') or hasAuthority(''VER_GRUPOS'')')}">
            <div class="accordion-item border-0">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed rounded-0 h-default h-sidebar"
                            data-bs-toggle="collapse" data-bs-target="#seguridadAccordion">
                        <i class="bi bi-shield-lock me-2"></i>Seguridad
                    </button>
                </h2>
                <div id="seguridadAccordion" class="accordion-collapse collapse" data-bs-parent="#mainSidebarAccordion">
                    <div class="list-group list-group-flush">
                        <a href="/usuarios" class="list-group-item list-group-item-action h-default h-sidebar small"
                           th:if="${#authorization.expression('hasAuthority(''VER_USUARIOS'')')}">
                            <i class="bi bi-people me-2"></i><span class="text-truncate">Usuarios</span>
                        </a>
                        <a href="/autoridades" class="list-group-item list-group-item-action h-default h-sidebar small"
                           th:if="${#authorization.expression('hasAuthority(''VER_AUTORIDADES'')')}">
                            <i class="bi bi-shield-check me-2"></i><span class="text-truncate">Autoridades</span>
                        </a>
                        <a href="/grupos" class="list-group-item list-group-item-action h-default h-sidebar small"
                           th:if="${#authorization.expression('hasAuthority(''VER_GRUPOS'')')}">
                            <i class="bi bi-collection me-2"></i><span class="text-truncate">Grupos</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        
        </div>
    </div>

</div>