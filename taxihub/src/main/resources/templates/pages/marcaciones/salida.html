<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/system :: system(~{::content}, ${pageTitle}, ~{::scripts})}">
<head>
    <title th:text="${pageTitle}">Marcación de Salida - TaxiHub</title>
</head>
<body>

<div th:fragment="content" class="d-flex flex-column justify-content-center align-items-center" style="height: 100%; padding: 20px;">

    <input type="hidden" id="dynamosoft-token" th:value="${dynamosoftToken}" />
    <input type="hidden" id="tipo-marcacion" th:value="${tipoMarcacion}" />

    <div class="text-center mb-4">
        <h2><i class="bi bi-box-arrow-left me-2 text-danger"></i>Scanner de Salida</h2>
        <p class="text-muted">Escanea el código QR del empleado para registrar su salida.</p>
    </div>

    <div id="success-message" th:if="${successMessage}" th:text="${successMessage}" style="display: none;"></div>
    <div id="error-message" th:if="${errorMessage}" th:text="${errorMessage}" style="display: none;"></div>

    <div class="card shadow-lg" style="width: 100%; max-width: 600px;">
        <div class="card-body p-0">
            <div id="barcode-scanner-container" style="width: 100%; height: 400px; background-color: #000; border-radius: 8px; position: relative;">
            </div>
        </div>
    </div>

    <div class="mt-4 d-flex gap-3">
        <button id="btn-cerrar-scanner" class="btn btn-outline-danger">
            <i class="bi bi-x-circle me-2"></i>Cerrar Scanner
        </button>
        <button id="btn-ir-pagos" class="btn btn-outline-primary">
            <i class="bi bi-credit-card me-2"></i>Ir a Pagos
        </button>
    </div>

</div>
<div th:fragment="scripts">
    <script th:src="@{/js/componentes/toast.js}"></script>
    <script src="https://cdn.jsdelivr.net/npm/dynamsoft-barcode-reader-bundle@11.0.6000/dist/dbr.bundle.js"></script>
    <script th:src="@{/js/pages/marcaciones.js}"></script>
</div>

</body>
</html>